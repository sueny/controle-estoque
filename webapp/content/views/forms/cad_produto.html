<div layout-fill ng-init="vm.initCadastroProduto()" ng-cloak>
    <div layout="row" layout-align="center start">
        <div flex="80"  class="md-whiteframe-6dp">
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2>
                        <span ng-hide="vm.isShow">Cadastrar Produto</span>
                        <span ng-show="vm.isShow">Editar Produto</span>
                    </h2>
                </div>
            </md-toolbar>
            <md-content class="md-padding">

                <form name="produtoForm" data-ng-submit="vm.cadastrarProduto(vm.Produto)">



                    <div layout-gt-sm="column">
                        <div layout="rows">
                            <!-- <md-input-container flex>
                                <label>Super Categoria</label>
                                <md-select name="superCategoryName" ng-change="vm.setProductSuperCategory(vm.produto.ProdutoSuperCategory.id)" ng-model="vm.produto.ProdutoSuperCategory.id"
                                           required>
                                    <md-option  value="{{superCategory.id}}" ng-repeat="superCategory in vm.ListaProductSuperCategory">{{superCategory.name}}</md-option>
                                </md-select>
                            </md-input-container>
                            <md-input-container flex>
                                <label>Sub Categoria</label>
                                <md-select name="subCategoryID" ng-model="vm.produto.ProductSubCategory.id"
                                           required>
                                    <md-option value="{{subCategory.id}}" ng-repeat="subCategory in vm.ProductSubCategory">{{subCategory.name}}</md-option>
                                </md-select>
                            </md-input-container> -->
                            <md-input-container flex>
                                <label>Modelo do Produto</label>
                                <md-select name="modeloProduto" ng-model="vm.produto.productModel.id"
                                           required>
                                    <md-option value="{{mod.id}}" ng-repeat="mod in vm.listaModelos">{{mod.name}}</md-option>
                                </md-select>
                            </md-input-container>
                        </div>
                        <div layout="rows">
                            <md-input-container>
                                <label>SKU</label>
                                <input name="skuProduto" ng-model="vm.Produto.skuCode" required
                                       md-maxlength="20">
                            </md-input-container>
                            <md-input-container flex>
                                <label>Nome do Produto</label>
                                <input name="nomeProduto" ng-model="vm.Produto.name" required
                                       md-maxlength="40">
                            </md-input-container>
                        </div>
                        <div layout="row">
                            <md-input-container>
                                <label>Tamanho</label>
                                <md-select name="sizeCliente" ng-model="vm.Produto.size" required>
                                    <md-option value="X_SMALL">PP</md-option>
                                    <md-option value="SMALL">P</md-option>
                                    <md-option value="MEDIUM">M</md-option>
                                    <md-option value="LARGE">G</md-option>
                                    <md-option value="X_LARGE">GG</md-option>
                                    <md-option value="XX_LARGE">GGG</md-option>
                                </md-select>
                            </md-input-container>
                            <md-input-container flex>
                                <label>Variação</label>
                                <input name="variationProduto" ng-model="vm.Produto.variation" required
                                       md-maxlength="40">
                            </md-input-container>

                        </div>

                        <div class="box" ng-show="vm.listaMateriaPrima.length > 0">
                        <div ng-repeat="materiaPrima in vm.listaMateriaPrima" layout="column">
                            <div class="chip">
                                <span ng-if="!materiaPrima.isShow"><b>{{materiaPrima.name}} - </b></span>
                                <span ng-if="!materiaPrima.isShow">{{materiaPrima.qte}}</span>
                                <span ng-if="!materiaPrima.isShow"><a ng-click="vm.alertDeleteMateriaPrima(materiaPrima)"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAaElEQVQ4T2NkwA4WMDAwxKNJgcQS0ZUzQgUcGBgY9uMwDJewIwMDwwGYAQYMDAwTSDSggIGB4QLMAJBeBSzOxmXmQgYGhgcgSWQDSPEG2PmjBoyGweBMB6CUuYGBgcGfQKYC5YMEmBoAfNQgEXHOeoIAAAAASUVORK5CYII="></a></span>
                                <span ng-if="materiaPrima.isShow">Remover {{materiaPrima.name}}?  </span>
                                <md-button md-no-ink class="md-primary" ng-if="materiaPrima.isShow" ng-click="vm.removerMateriaPrima($index,materiaPrima)">Sim</md-button>
                                <md-button md-no-ink class="md-primary" ng-if="materiaPrima.isShow" ng-click="vm.alertDeleteMateriaPrima(materiaPrima)">Não</md-button>
                            </div>
                        </div>
                        </div>

                        <div flex="100" class="md-whiteframe-4dp" layout-align="center start">
                            <md-toolbar>
                                <div class="md-toolbar-tools">
                                    <h2>
                                        <span>Composição do Produto</span>
                                    </h2>
                                </div>
                            </md-toolbar>
                            <div layout="row">
                                <md-input-container>
                                    <label>Composição</label>
                                    <input name="nameMateriaPrima" ng-focus="vm.showListMateriaPrima()" ng-model="vm.materiaprima.name" required
                                           md-maxlength="40">
                                </md-input-container>
                                <md-input-container flex>
                                    <label>Quantidade</label>
                                    <input name="qteMateriaPrima" id="qteMateriaPrima" type="number" ng-model="vm.materiaprima.qte" required>
                                </md-input-container>
                                <md-button name=addMateriaPrima" class="md-raised md-primary" aria-label="Compor Produto" ng-click="vm.adicionarMateriaPrima(vm.materiaprima)">Compor</md-button>
                        </div>
                        </div>
                        <div layout-align="end center" layout="rows">
                            <md-button ng-click="vm.resetFormProduto()" class="md-raised md-primary">Limpar Formulário</md-button>
                            <span flex></span>
                            <div ng-show="vm.isShow">
                                <md-button name="btnExcluirProduto" class="md-raised md-primary" aria-label="Remove" ng-click="vm.excluirProduto($event, vm.Produto)">Excluir</md-button>
                                <md-button name="btnCadastrarProduto" type="submit" class="md-primary"
                                           ng-class="{'md-primary md-raised': (produtoForm.$dirty && produtoForm.$valid) }"
                                           aria-label="Submit">Alterar</md-button>

                            </div>
                            <div ng-show="vm.isShowBtnCadastrar">
                                <md-button name="btnCadastrarProduto" type="submit" class="md-primary"
                                           ng-class="{'md-primary md-raised': (produtoForm.$dirty && produtoForm.$valid) }"
                                           aria-label="Submit">Cadastrar</md-button>
                            </div>
                        </div>
                    </div>
                </form>

            </md-content>
        </div>
    </div>
    <div layout-align="center center" layout="row" ng-show="vm.isVisibleGrandeMateriaPrima">
        <div class="md-whiteframe-6dp" flex="80">
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2>
                        <span>Lista de Materias Prima Cadastrada</span>
                    </h2>
                </div>
            </md-toolbar>
            <md-content class="md-padding" flex>
                <div class="containerDiv">
                    <div class="rowDivHeader">
                        <div class="cellDivHeader" ng-click="vm.ordenaMateriaPrima('name')">MATÉRIA PRIMA</div>
                        <div class="cellDivHeader" ng-click="vm.ordenaMateriaPrima('skuCode')">SKU</div>
                    </div>
                    <div class="rowDiv" ng-repeat="materiaprima in vm.listaBuscaMateriaPrima | orderBy:vm.campoOrdencao:vm.reverse | filter: vm.materiaprima.name">
                        <div class="cellDiv" ng-click="vm.selecionarMateriaPrima(materiaprima)">{{ materiaprima.name}}</div>
                        <div class="cellDiv" ng-click="vm.selecionarMateriaPrima(materiaprima)">{{materiaprima.skuCode}}</div>
                    </div>
                </div>
            </md-content>
        </div>

    </div>
</div>
