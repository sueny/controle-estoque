!function(){"use strict";angular.module("app",["ui.router","toastService","ngMaterial"]).config(["$httpProvider",function(a){}])}(),function(){"use strict";function a(a){function t(t){this.message=t,a.show({controller:"toastController",controllerAs:"vm",templateUrl:"controle-estoque-web/client/views/forms/toast.html",action:"OK",highlightAction:!0,position:"top right",hideDelay:2e3})}function e(t){this.message=t,a.show({controller:"toastController",controllerAs:"vm",templateUrl:"views/pages/dsctoast.html",action:"OK",highlightAction:!0,position:"bottom left",hideDelay:1e3})}var r={message:"",newmessage:t,errorMessageBottom:e};return r}angular.module("toastService",[]).controller("toastController",["$mdToast","toastApp",function(a,t){var e=this;e.message=t.message,e.closeToast=function(){a.hide()}}]).factory("toastApp",a),a.$inject=["$mdToast"]}(),function(){"use strict";function a(a,t,e){a.state("cadastroMateriaPrima",{url:"/",templateUrl:e.staticPath+"views/forms/cad_materiaprima.html",controller:"cadastroMateriaPrimaController as vm"}),t.otherwise("/")}angular.module("app").config(a),a.$inject=["$stateProvider","$urlRouterProvider","paths"]}(),function(){"use strict";function a(a,t,e){function r(){l.listaUnidades=["Kg","m"]}function i(a){l.materiaprima=a,l.isBtnRemoveMateriaPrima=!0}function o(){t.listarTodas().success(function(a){console.log(a),l.listaMateriaPrima=a})}function s(r,i){var o=e.confirm().parent(angular.element(document.body)).title("Excluir Matéria prima com Sku"+i.skuCode).content("Materia Prima: "+i.name).ariaLabel("Excluir Materia Prima").ok("Sim").cancel("Não").targetEvent(r);e.show(o).then(function(){t.excluir(i).success(function(t){if(t){for(var e=0;e<l.listaMateriaPrima.length;e++)l.listaMateriaPrima[e].id===i.id,l.listaMateriaPrima.splice(e,1);a.newmessage("Removido com sucesso!.")}else a.newmessage("Problema ao Acessar o servidor")});for(var e=0;e<l.listaMateriaPrima.length;e++)if(console.log(l.listaMateriaPrima[e].id+" === "+i.id),l.listaMateriaPrima[e].id===i.id){l.listaMateriaPrima.splice(e,1);break}l.isBtnRemoveMateriaPrima=!1,a.newmessage("Removido a Materia Prima com o SKU."+i.sku),l.materiaprima={id:null,name:"",skuCode:"",measuringUnit:"",description:""}})}function n(e){t.cadastrar(e).success(function(t){console.log(t),t?(l.listaMateriaPrima.push(e),a.newmessage("Cadastro realizado com sucesso!")):a.newmessage("Problema ao Acessar a o servidor")})}function c(a){l.reverse=l.campoOrdencao===a?!l.reverse:!1,l.campoOrdencao=a}var l=this;l.initcadastroMateriaPrima=o,l.cadastrarMateriaPrima=n,l.buscaUnidadesMateriaPrima=r,l.excluirMateriaPrima=s,l.listaUnidades,l.isBtnRemoveMateriaPrima=!1,l.materiaprima={},l.listaMateriaPrima=[],l.selecionarMateriaPrima=i,l.campoOrdencao="nome",l.reverse=!0,l.ordenaMateriaPrima=c}angular.module("app").controller("cadastroMateriaPrimaController",a),a.$inject=["toastApp","materiaPrimaService","$mdDialog"]}(),function(){"use strict";function a(a,t){function e(t){return a.post(o,t)}function r(t){return a.post(s,t)}function i(){return a.post(n)}var o=t.apiUrl+"materialcategory/cadastrar/",s=t.apiUrl+"materialcategory/remover/",n=t.apiUrl+"materialcategory/listar/",c={cadastrar:e,excluir:r,listarTodas:i};return c}angular.module("app").factory("materialCategoryService",a),a.$inject=["$http","paths","$location"]}(),function(){"use strict";function a(a,t){function e(t){return a.post(o,t)}function r(t){return a.post(s,t)}function i(){return a.post(n)}var o=t.apiUrl+"material/cadastrar/",s=t.apiUrl+"material/remover/",n=t.apiUrl+"material/listar/",c={cadastrar:e,excluir:r,listarTodas:i};return c}angular.module("app").factory("materiaPrimaService",a),a.$inject=["$http","paths","$location"]}(),function(){"use strict";function a(a){a.theme("default").primaryPalette("purple",{"default":"400","hue-1":"100","hue-2":"600","hue-3":"A100"}).accentPalette("purple",{"default":"200"})}var t="",e="http://localhost:8080/controle-estoque-web/api/";angular.module("app").constant("paths",{staticPath:t,apiUrl:e}).config(a),a.$inject=["$mdThemingProvider","$locationProvider"]}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbmZhcm8uYXBwLmpzIiwidG9hc3Quc2VydmljZS5qcyIsInJvdXRlci5hcHAuanMiLCJhcHAuY29uZmFyby5taW4uanMiLCJjYWRhc3Ryby9jYWRhc3Ryb01hdGVyaWFQcmltYUNvbnRyb2xsZXIuanMiLCJzZXJ2aWNlL3NlcnZpY2VNYXRlcmlhbENhdGVnb3J5LmpzIiwic2VydmljZS9zZXJ2aWNlTWF0ZXJpYVByaW1hLmpzIiwiYXBwLWNvbmZpZy5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJGh0dHBQcm92aWRlciIsInRvYXN0QXBwIiwiJG1kVG9hc3QiLCJuZXdtZXNzYWdlIiwiZXJyb3JNZXNzYWdlIiwidGhpcyIsIm1lc3NhZ2UiLCJzaG93IiwiY29udHJvbGxlciIsImNvbnRyb2xsZXJBcyIsInRlbXBsYXRlVXJsIiwiYWN0aW9uIiwiaGlnaGxpZ2h0QWN0aW9uIiwicG9zaXRpb24iLCJoaWRlRGVsYXkiLCJlcnJvck1lc3NhZ2VCb3R0b20iLCJzZXJ2aWNlIiwic2VsZiIsImNsb3NlVG9hc3QiLCJoaWRlIiwiZmFjdG9yeSIsIiRpbmplY3QiLCJyb3V0ZXMiLCIkc3RhdGVQcm92aWRlciIsIiR1cmxSb3V0ZXJQcm92aWRlciIsInBhdGhzIiwic3RhdGUiLCJ1cmwiLCJzdGF0aWNQYXRoIiwib3RoZXJ3aXNlIiwiY2FkYXN0cm9NYXRlcmlhUHJpbWFDb250cm9sbGVyIiwibWF0ZXJpYVByaW1hU2VydmljZSIsIiRtZERpYWxvZyIsImJ1c2NhVW5pZGFkZXNNYXRlcmlhUHJpbWEiLCJsaXN0YVVuaWRhZGVzIiwic2VsZWNpb25hck1hdGVyaWFQcmltYSIsIm1hdGVyaWFQcmltYSIsIm1hdGVyaWFwcmltYSIsImlzQnRuUmVtb3ZlTWF0ZXJpYVByaW1hIiwiaW5pdGNhZGFzdHJvTWF0ZXJpYVByaW1hIiwibGlzdGFyVG9kYXMiLCJzdWNjZXNzIiwiZGF0YSIsImNvbnNvbGUiLCJsb2ciLCJsaXN0YU1hdGVyaWFQcmltYSIsImV4Y2x1aXJNYXRlcmlhUHJpbWEiLCJldiIsImNvbmZpcm0iLCJwYXJlbnQiLCJlbGVtZW50IiwiZG9jdW1lbnQiLCJib2R5IiwidGl0bGUiLCJza3VDb2RlIiwiY29udGVudCIsIm5hbWUiLCJhcmlhTGFiZWwiLCJvayIsImNhbmNlbCIsInRhcmdldEV2ZW50IiwidGhlbiIsImV4Y2x1aXIiLCJpIiwibGVuZ3RoIiwiaWQiLCJzcGxpY2UiLCJza3UiLCJtZWFzdXJpbmdVbml0IiwiZGVzY3JpcHRpb24iLCJjYWRhc3RyYXJNYXRlcmlhUHJpbWEiLCJjYWRhc3RyYXIiLCJwdXNoIiwib3JkZW5hTWF0ZXJpYVByaW1hIiwiY2FtcG9PcmRlbmNhbyIsInJldmVyc2UiLCJtYXRlcmlhbENhdGVnb3J5U2VydmljZSIsIiRodHRwIiwicG9zdCIsIkFQSV9ST1VURV9DQURBU1RSQVJNQVRFUklBTFBSSU1BIiwiQVBJX1JPVVRFX0VYQ0xVSVJNQVRFUklBUFJJTUEiLCJBUElfUk9VVEVfTElTVEFSTUFURVJJQVBSSU1BIiwiYXBpVXJsIiwiYXBwQ29uZmlnIiwiJG1kVGhlbWluZ1Byb3ZpZGVyIiwidGhlbWUiLCJwcmltYXJ5UGFsZXR0ZSIsImRlZmF1bHQiLCJodWUtMSIsImh1ZS0yIiwiaHVlLTMiLCJhY2NlbnRQYWxldHRlIiwiY29uc3RhbnQiXSwibWFwcGluZ3MiOiJDQUlBLFdBQ0EsWUFDQUEsU0FDQUMsT0FBQSxPQUFBLFlBQUEsZUFBQSxlQUNBQyxRQUFBLGdCQUFBLFNBQUFDLFVDTEEsV0FFQSxZQWNBLFNBQUFDLEdBQUFDLEdBaUJBLFFBQUFDLEdBQUFDLEdBQ0FDLEtBQUFDLFFBQUFGLEVBQ0FGLEVBQUFLLE1BRUFDLFdBQUEsa0JBQ0FDLGFBQUEsS0FDQUMsWUFBQSxxREFDQUMsT0FBQSxLQUNBQyxpQkFBQSxFQUNBQyxTQUFBLFlBQ0FDLFVBQUEsTUFLQSxRQUFBQyxHQUFBWCxHQUNBQyxLQUFBQyxRQUFBRixFQUNBRixFQUFBSyxNQUVBQyxXQUFBLGtCQUNBQyxhQUFBLEtBQ0FD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T0FBQSxPQUNBc0IsUUFBQSxzQkFBQVcsR0FFQUEsRUFBQVYsU0FBQSxRQUFBLFFBQUEsZ0JDVkEsV0FFQSxZQWVBLFNBQUE4RCxHQUFBQyxHQUNBQSxFQUFBQyxNQUFBLFdBQ0FDLGVBQUEsVUFDQUMsVUFBQSxNQUNBQyxRQUFBLE1BQ0FDLFFBQUEsTUFDQUMsUUFBQSxTQUlBQyxjQUFBLFVBQ0FKLFVBQUEsUUF4QkEsR0FBQTNELEdBQUEsR0FDQXNELEVBQUEsaURBRUFyRixTQUNBQyxPQUFBLE9BQ0E4RixTQUFBLFNBQ0FoRSxXQUFBQSxFQUNBc0QsT0FBQUEsSUFFQW5GLE9BQUFvRixHQUVBQSxFQUFBOUQsU0FBQSxxQkFBQSIsImZpbGUiOiJhcHAuY29uZmFyby5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBqZXN1cyBvbiAxMC8wNS8yMDE2LlxyXG4gKi9cclxuXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdhcHAnLFsndWkucm91dGVyJywndG9hc3RTZXJ2aWNlJywnbmdNYXRlcmlhbCddKVxyXG4gICAgICAgIC5jb25maWcoZnVuY3Rpb24oJGh0dHBQcm92aWRlcikge1xyXG4gICAgICAgICAgICAvKiRodHRwUHJvdmlkZXIuaW50ZXJjZXB0b3JzLnB1c2goJ0F1dGhJbnRlcmNlcHRvcicpOyovXHJcbiAgICAgICAgfSlcclxuXHJcbn0pKCk7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgSk9TRVZBTERFUkxFSSBvbiAyNy8wNi8yMDE1LlxyXG4gKi9cclxuKGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCd0b2FzdFNlcnZpY2UnLFtdKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCd0b2FzdENvbnRyb2xsZXInLCBmdW5jdGlvbigkbWRUb2FzdCx0b2FzdEFwcCkge1xyXG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgICAgIHNlbGYubWVzc2FnZSA9ICB0b2FzdEFwcC5tZXNzYWdlO1xyXG4gICAgICAgICAgICBzZWxmLmNsb3NlVG9hc3QgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICRtZFRvYXN0LmhpZGUoKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5mYWN0b3J5KCAndG9hc3RBcHAnLCB0b2FzdEFwcCApO1xyXG5cclxuICAgIHRvYXN0QXBwLiRpbmplY3QgPSBbICckbWRUb2FzdCcgXTtcclxuXHJcbiAgICBmdW5jdGlvbiB0b2FzdEFwcCAoJG1kVG9hc3QpIHtcclxuICAgICAgICB2YXIgc2VydmljZSA9IHtcclxuICAgICAgICAgICAgbWVzc2FnZTogJycsXHJcbiAgICAgICAgICAgIG5ld21lc3NhZ2U6IG5ld21lc3NhZ2UsXHJcbiAgICAgICAgICAgIGVycm9yTWVzc2FnZUJvdHRvbTogZXJyb3JNZXNzYWdlQm90dG9tXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gc2VydmljZTtcclxuXHJcbiAgICAgICAgLypmdW5jdGlvbiBlcnJvck1lc3NhZ2UoZXJyb3JNZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICRtZFRvYXN0LnNob3coXHJcbiAgICAgICAgICAgICAgICAkbWRUb2FzdC5zaW1wbGUoKVxyXG4gICAgICAgICAgICAgICAgLnRleHRDb250ZW50KGVycm9yTWVzc2FnZSlcclxuICAgICAgICAgICAgICAgIC5wb3NpdGlvbigndG9wIHJpZ2h0JylcclxuICAgICAgICAgICAgICAgIC5oaWRlRGVsYXkoODAwKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0qL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBuZXdtZXNzYWdlKGVycm9yTWVzc2FnZSkge1xyXG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICAgICAgICAgICRtZFRvYXN0LnNob3coXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3RvYXN0Q29udHJvbGxlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnY29udHJvbGUtZXN0b3F1ZS13ZWIvY2xpZW50L3ZpZXdzL2Zvcm1zL3RvYXN0Lmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJPS1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodEFjdGlvbjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogXCJ0b3AgcmlnaHRcIixcclxuICAgICAgICAgICAgICAgICAgICBoaWRlRGVsYXk6IDIwMDBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGVycm9yTWVzc2FnZUJvdHRvbShlcnJvck1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgdGhpcy5tZXNzYWdlID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgICAgICAgICAkbWRUb2FzdC5zaG93KFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICd0b2FzdENvbnRyb2xsZXInLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3BhZ2VzL2RzY3RvYXN0Lmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJPS1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodEFjdGlvbjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogXCJib3R0b20gbGVmdFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGhpZGVEZWxheTogMTAwMFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn0pKCk7XHJcblxyXG5cclxuXHJcblxyXG5cclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgSk9TRVZBTERFUkxFSSBvbiAyNS8wNi8yMDE1LlxyXG4gKi9cclxuKGZ1bmN0aW9uKCl7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnYXBwJylcclxuICAgICAgICAuY29uZmlnKHJvdXRlcyk7XHJcbiAgICBmdW5jdGlvbiByb3V0ZXMoJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlciwgcGF0aHMpIHtcclxuICAgICAgICAkc3RhdGVQcm92aWRlci5zdGF0ZSgnY2FkYXN0cm9NYXRlcmlhUHJpbWEnLCB7XHJcbiAgICAgICAgICAgIHVybDogJy8nLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogcGF0aHMuc3RhdGljUGF0aCArICd2aWV3cy9mb3Jtcy9jYWRfbWF0ZXJpYXByaW1hLmh0bWwnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnY2FkYXN0cm9NYXRlcmlhUHJpbWFDb250cm9sbGVyIGFzIHZtJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvJyk7XHJcblxyXG4gICAgfVxyXG5cclxufSkoKTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgamVzdXMgb24gMTAvMDUvMjAxNi5cclxuICovXHJcblxyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnYXBwJyxbJ3VpLnJvdXRlcicsJ3RvYXN0U2VydmljZScsJ25nTWF0ZXJpYWwnXSlcclxuICAgICAgICAuY29uZmlnKFtcIiRodHRwUHJvdmlkZXJcIiwgZnVuY3Rpb24oJGh0dHBQcm92aWRlcikge1xyXG4gICAgICAgICAgICAvKiRodHRwUHJvdmlkZXIuaW50ZXJjZXB0b3JzLnB1c2goJ0F1dGhJbnRlcmNlcHRvcicpOyovXHJcbiAgICAgICAgfV0pXHJcblxyXG59KSgpO1xuLyoqXHJcbiAqIENyZWF0ZWQgYnkgSk9TRVZBTERFUkxFSSBvbiAyNy8wNi8yMDE1LlxyXG4gKi9cclxuKGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCd0b2FzdFNlcnZpY2UnLFtdKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCd0b2FzdENvbnRyb2xsZXInLCBbXCIkbWRUb2FzdFwiLCBcInRvYXN0QXBwXCIsIGZ1bmN0aW9uKCRtZFRvYXN0LHRvYXN0QXBwKSB7XHJcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICAgICAgc2VsZi5tZXNzYWdlID0gIHRvYXN0QXBwLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgIHNlbGYuY2xvc2VUb2FzdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgJG1kVG9hc3QuaGlkZSgpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1dKVxyXG4gICAgICAgIC5mYWN0b3J5KCAndG9hc3RBcHAnLCB0b2FzdEFwcCApO1xyXG5cclxuICAgIHRvYXN0QXBwLiRpbmplY3QgPSBbICckbWRUb2FzdCcgXTtcclxuXHJcbiAgICBmdW5jdGlvbiB0b2FzdEFwcCAoJG1kVG9hc3QpIHtcclxuICAgICAgICB2YXIgc2VydmljZSA9IHtcclxuICAgICAgICAgICAgbWVzc2FnZTogJycsXHJcbiAgICAgICAgICAgIG5ld21lc3NhZ2U6IG5ld21lc3NhZ2UsXHJcbiAgICAgICAgICAgIGVycm9yTWVzc2FnZUJvdHRvbTogZXJyb3JNZXNzYWdlQm90dG9tXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gc2VydmljZTtcclxuXHJcbiAgICAgICAgLypmdW5jdGlvbiBlcnJvck1lc3NhZ2UoZXJyb3JNZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICRtZFRvYXN0LnNob3coXHJcbiAgICAgICAgICAgICAgICAkbWRUb2FzdC5zaW1wbGUoKVxyXG4gICAgICAgICAgICAgICAgLnRleHRDb250ZW50KGVycm9yTWVzc2FnZSlcclxuICAgICAgICAgICAgICAgIC5wb3NpdGlvbigndG9wIHJpZ2h0JylcclxuICAgICAgICAgICAgICAgIC5oaWRlRGVsYXkoODAwKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0qL1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBuZXdtZXNzYWdlKGVycm9yTWVzc2FnZSkge1xyXG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICAgICAgICAgICRtZFRvYXN0LnNob3coXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3RvYXN0Q29udHJvbGxlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnY29udHJvbGUtZXN0b3F1ZS13ZWIvY2xpZW50L3ZpZXdzL2Zvcm1zL3RvYXN0Lmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJPS1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodEFjdGlvbjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogXCJ0b3AgcmlnaHRcIixcclxuICAgICAgICAgICAgICAgICAgICBoaWRlRGVsYXk6IDIwMDBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGVycm9yTWVzc2FnZUJvdHRvbShlcnJvck1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgdGhpcy5tZXNzYWdlID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgICAgICAgICAkbWRUb2FzdC5zaG93KFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICd0b2FzdENvbnRyb2xsZXInLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3ZpZXdzL3BhZ2VzL2RzY3RvYXN0Lmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogXCJPS1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIGhpZ2hsaWdodEFjdGlvbjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogXCJib3R0b20gbGVmdFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGhpZGVEZWxheTogMTAwMFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn0pKCk7XHJcblxyXG5cclxuXHJcblxyXG5cclxuXG4vKipcclxuICogQ3JlYXRlZCBieSBKT1NFVkFMREVSTEVJIG9uIDI1LzA2LzIwMTUuXHJcbiAqL1xyXG4oZnVuY3Rpb24oKXtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgICAgIC5jb25maWcocm91dGVzKTtcclxuICAgIGZ1bmN0aW9uIHJvdXRlcygkc3RhdGVQcm92aWRlciwgJHVybFJvdXRlclByb3ZpZGVyLCBwYXRocykge1xyXG4gICAgICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdjYWRhc3Ryb01hdGVyaWFQcmltYScsIHtcclxuICAgICAgICAgICAgdXJsOiAnLycsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBwYXRocy5zdGF0aWNQYXRoICsgJ3ZpZXdzL2Zvcm1zL2NhZF9tYXRlcmlhcHJpbWEuaHRtbCcsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdjYWRhc3Ryb01hdGVyaWFQcmltYUNvbnRyb2xsZXIgYXMgdm0nXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy8nKTtcclxuXHJcbiAgICB9XHJcbiAgICByb3V0ZXMuJGluamVjdCA9IFtcIiRzdGF0ZVByb3ZpZGVyXCIsIFwiJHVybFJvdXRlclByb3ZpZGVyXCIsIFwicGF0aHNcIl07XHJcblxyXG59KSgpO1xyXG5cbi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGplc3VzIG9uIDEwLzA1LzIwMTYuXHJcbiAqL1xyXG5cclxuKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpXHJcbiAgICAgICAgICAgIC5jb250cm9sbGVyKCdjYWRhc3Ryb01hdGVyaWFQcmltYUNvbnRyb2xsZXInLCBjYWRhc3Ryb01hdGVyaWFQcmltYUNvbnRyb2xsZXIpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNhZGFzdHJvTWF0ZXJpYVByaW1hQ29udHJvbGxlcih0b2FzdEFwcCwgbWF0ZXJpYVByaW1hU2VydmljZSwgJG1kRGlhbG9nKSB7XHJcblxyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICBzZWxmLmluaXRjYWRhc3Ryb01hdGVyaWFQcmltYSA9IGluaXRjYWRhc3Ryb01hdGVyaWFQcmltYTtcclxuICAgICAgICBzZWxmLmNhZGFzdHJhck1hdGVyaWFQcmltYSA9IGNhZGFzdHJhck1hdGVyaWFQcmltYTtcclxuICAgICAgICBzZWxmLmJ1c2NhVW5pZGFkZXNNYXRlcmlhUHJpbWEgPSBidXNjYVVuaWRhZGVzTWF0ZXJpYVByaW1hO1xyXG4gICAgICAgIHNlbGYuZXhjbHVpck1hdGVyaWFQcmltYSA9IGV4Y2x1aXJNYXRlcmlhUHJpbWE7XHJcbiAgICAgICAgc2VsZi5saXN0YVVuaWRhZGVzO1xyXG4gICAgICAgIHNlbGYuaXNCdG5SZW1vdmVNYXRlcmlhUHJpbWEgPSBmYWxzZTtcclxuICAgICAgICBzZWxmLm1hdGVyaWFwcmltYSA9IHt9O1xyXG4gICAgICAgIHNlbGYubGlzdGFNYXRlcmlhUHJpbWEgPSBbXTtcclxuICAgICAgICBzZWxmLnNlbGVjaW9uYXJNYXRlcmlhUHJpbWEgPSBzZWxlY2lvbmFyTWF0ZXJpYVByaW1hO1xyXG4gICAgICAgIHNlbGYuY2FtcG9PcmRlbmNhbyA9ICdub21lJztcclxuICAgICAgICBzZWxmLnJldmVyc2UgPSB0cnVlO1xyXG4gICAgICAgIHNlbGYub3JkZW5hTWF0ZXJpYVByaW1hID0gb3JkZW5hTWF0ZXJpYVByaW1hO1xyXG5cclxuXHJcblxyXG5cclxuICAgICAgICBmdW5jdGlvbiBidXNjYVVuaWRhZGVzTWF0ZXJpYVByaW1hKCkge1xyXG4gICAgICAgICAgICBzZWxmLmxpc3RhVW5pZGFkZXMgPSBbJ0tnJywgJ20nXVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2VsZWNpb25hck1hdGVyaWFQcmltYShtYXRlcmlhUHJpbWEpIHtcclxuICAgICAgICAgICAgc2VsZi5tYXRlcmlhcHJpbWEgPSBtYXRlcmlhUHJpbWE7XHJcbiAgICAgICAgICAgIHNlbGYuaXNCdG5SZW1vdmVNYXRlcmlhUHJpbWEgPSB0cnVlO1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGluaXRjYWRhc3Ryb01hdGVyaWFQcmltYSgpIHtcclxuICAgICAgICAgICAgbWF0ZXJpYVByaW1hU2VydmljZS5saXN0YXJUb2RhcygpXHJcbiAgICAgICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubGlzdGFNYXRlcmlhUHJpbWEgPSBkYXRhO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgICAgICAvKiAgdmFyIG1hdGVyaWFwcmltYSA9IHtpZDogMSwgbm9tZTogXCJYIFRlY2lkb1wiLCBza3U6IFwiMDAwMDBYOTk5XCIsIHVuaWRhZGU6IFwiS0dcIiwgb2JzZXJ2YWNhbzogXCJUZXN0ZSBkZSBYXCJ9O1xyXG4gICAgICAgICAgICAgc2VsZi5saXN0YU1hdGVyaWFQcmltYS5wdXNoKG1hdGVyaWFwcmltYSk7XHJcbiAgICAgICAgICAgICB2YXIgbWF0ZXJpYXByaW1hID0ge2lkOiAyLCBub21lOiBcIkIgVGVjaWRvXCIsIHNrdTogXCIwMDAwMEIwMDNcIiwgdW5pZGFkZTogXCJLR1wiLCBvYnNlcnZhY2FvOiBcIlRlc3RlIGRlIEJcIn07XHJcbiAgICAgICAgICAgICBzZWxmLmxpc3RhTWF0ZXJpYVByaW1hLnB1c2gobWF0ZXJpYXByaW1hKTtcclxuICAgICAgICAgICAgIHZhciBtYXRlcmlhcHJpbWEgPSB7aWQ6IDMsIG5vbWU6IFwiQSBUZWNpZG9cIiwgc2t1OiBcIjAwMDAwWDk5OVwiLCB1bmlkYWRlOiBcIktHXCIsIG9ic2VydmFjYW86IFwiVGVzdGUgZGUgQVwifTtcclxuICAgICAgICAgICAgIHNlbGYubGlzdGFNYXRlcmlhUHJpbWEucHVzaChtYXRlcmlhcHJpbWEpO1xyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBmdW5jdGlvbiBleGNsdWlyTWF0ZXJpYVByaW1hKGV2LCBtYXRlcmlhUHJpbWEpIHtcclxuICAgICAgICAgICAgdmFyIGNvbmZpcm0gPSAkbWREaWFsb2cuY29uZmlybSgpXHJcbiAgICAgICAgICAgICAgICAgICAgLnBhcmVudChhbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQuYm9keSkpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRpdGxlKCdFeGNsdWlyIE1hdMOpcmlhIHByaW1hIGNvbSBTa3UnICsgbWF0ZXJpYVByaW1hLnNrdUNvZGUpXHJcbiAgICAgICAgICAgICAgICAgICAgLmNvbnRlbnQoJ01hdGVyaWEgUHJpbWE6ICcgKyBtYXRlcmlhUHJpbWEubmFtZSlcclxuICAgICAgICAgICAgICAgICAgICAuYXJpYUxhYmVsKCdFeGNsdWlyIE1hdGVyaWEgUHJpbWEnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vaygnU2ltJylcclxuICAgICAgICAgICAgICAgICAgICAuY2FuY2VsKCdOw6NvJylcclxuICAgICAgICAgICAgICAgICAgICAudGFyZ2V0RXZlbnQoZXYpO1xyXG4gICAgICAgICAgICAkbWREaWFsb2cuc2hvdyhjb25maXJtKS50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIG1hdGVyaWFQcmltYVNlcnZpY2UuZXhjbHVpcihtYXRlcmlhUHJpbWEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VsZi5saXN0YU1hdGVyaWFQcmltYS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmxpc3RhTWF0ZXJpYVByaW1hW2ldLmlkID09PSBtYXRlcmlhUHJpbWEuaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubGlzdGFNYXRlcmlhUHJpbWEuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2FzdEFwcC5uZXdtZXNzYWdlKCdSZW1vdmlkbyBjb20gc3VjZXNzbyEuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0QXBwLm5ld21lc3NhZ2UoJ1Byb2JsZW1hIGFvIEFjZXNzYXIgbyBzZXJ2aWRvcicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbGYubGlzdGFNYXRlcmlhUHJpbWEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhzZWxmLmxpc3RhTWF0ZXJpYVByaW1hW2ldLmlkICsgJyA9PT0gJyArIG1hdGVyaWFQcmltYS5pZClcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZi5saXN0YU1hdGVyaWFQcmltYVtpXS5pZCA9PT0gbWF0ZXJpYVByaW1hLmlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubGlzdGFNYXRlcmlhUHJpbWEuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBzZWxmLmlzQnRuUmVtb3ZlTWF0ZXJpYVByaW1hID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0b2FzdEFwcC5uZXdtZXNzYWdlKCdSZW1vdmlkbyBhIE1hdGVyaWEgUHJpbWEgY29tIG8gU0tVLicgKyBtYXRlcmlhUHJpbWEuc2t1KTtcclxuXHJcbiAgICAgICAgICAgICAgICBzZWxmLm1hdGVyaWFwcmltYSA9IHtpZDogbnVsbCwgbmFtZTogXCJcIiwgc2t1Q29kZTogXCJcIiwgbWVhc3VyaW5nVW5pdDogXCJcIiwgZGVzY3JpcHRpb246IFwiXCJ9O1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZ1bmN0aW9uIGNhZGFzdHJhck1hdGVyaWFQcmltYShtYXRlcmlhUHJpbWEpIHtcclxuXHJcbiAgICAgICAgICAgIG1hdGVyaWFQcmltYVNlcnZpY2UuY2FkYXN0cmFyKG1hdGVyaWFQcmltYSlcclxuICAgICAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubGlzdGFNYXRlcmlhUHJpbWEucHVzaChtYXRlcmlhUHJpbWEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RBcHAubmV3bWVzc2FnZSgnQ2FkYXN0cm8gcmVhbGl6YWRvIGNvbSBzdWNlc3NvIScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RBcHAubmV3bWVzc2FnZSgnUHJvYmxlbWEgYW8gQWNlc3NhciBhIG8gc2Vydmlkb3InKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLyogIHZhciBtYXRlcmlhcHJpbWEgPSB7aWQ6IHNlbGYubGlzdGFNYXRlcmlhUHJpbWEubGVuZ3RoKzEsIG5vbWU6IG1hdGVyaWFQcmltYS5ub21lLCBza3U6IG1hdGVyaWFQcmltYS5za3UsIHVuaWRhZGU6IG1hdGVyaWFQcmltYS51bmlkYWRlLCBvYnNlcnZhY2FvOiBtYXRlcmlhUHJpbWEub2JzZXJ2YWNhb307XHJcbiAgICAgICAgICAgICBzZWxmLmxpc3RhTWF0ZXJpYVByaW1hLnB1c2gobWF0ZXJpYXByaW1hKTtcclxuICAgICAgICAgICAgIHNlbGYubWF0ZXJpYXByaW1hID0ge2lkOiBudWxsLG5vbWU6IFwiXCIsIHNrdTogXCJcIiwgdW5pZGFkZTogXCJcIiwgb2JzZXJ2YWNhbzogXCJcIn07XHJcbiAgICAgICAgICAgICB0b2FzdEFwcC5uZXdtZXNzYWdlKCdDYWRhc3RybyByZWFsaXphZG8gY29tIHN1Y2Vzc28gcGFyYSBvIFNLVS4nICsgbWF0ZXJpYVByaW1hLnNrdSk7XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gb3JkZW5hTWF0ZXJpYVByaW1hKGNhbXBvT3JkZW5jYW8pIHtcclxuICAgICAgICAgICAgc2VsZi5yZXZlcnNlID0gKHNlbGYuY2FtcG9PcmRlbmNhbyA9PT0gY2FtcG9PcmRlbmNhbykgPyAhc2VsZi5yZXZlcnNlIDogZmFsc2U7XHJcbiAgICAgICAgICAgIHNlbGYuY2FtcG9PcmRlbmNhbyA9IGNhbXBvT3JkZW5jYW87XHJcblxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgfVxyXG4gICAgY2FkYXN0cm9NYXRlcmlhUHJpbWFDb250cm9sbGVyLiRpbmplY3QgPSBbXCJ0b2FzdEFwcFwiLCBcIm1hdGVyaWFQcmltYVNlcnZpY2VcIiwgXCIkbWREaWFsb2dcIl07XHJcblxyXG59KSgpO1xuLyoqXHJcbiAqIENyZWF0ZWQgYnkgamVzdXMgb24gMTEvMDUvMjAxNi5cclxuICovXHJcblxyXG5cclxuKGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgICAgIC5mYWN0b3J5KCdtYXRlcmlhbENhdGVnb3J5U2VydmljZScsIG1hdGVyaWFsQ2F0ZWdvcnlTZXJ2aWNlKTtcclxuXHJcbiAgICBtYXRlcmlhbENhdGVnb3J5U2VydmljZS4kaW5qZWN0ID0gWyckaHR0cCcsJ3BhdGhzJywnJGxvY2F0aW9uJ107XHJcblxyXG4gICAgZnVuY3Rpb24gbWF0ZXJpYWxDYXRlZ29yeVNlcnZpY2UoJGh0dHAsIHBhdGhzKSB7XHJcblxyXG4gICAgICAgIHZhciBBUElfUk9VVEVfQ0FEQVNUUkFSTUFURVJJQUxQUklNQSA9IHBhdGhzLmFwaVVybCArICdtYXRlcmlhbGNhdGVnb3J5L2NhZGFzdHJhci8nO1xyXG4gICAgICAgIHZhciBBUElfUk9VVEVfRVhDTFVJUk1BVEVSSUFQUklNQSA9IHBhdGhzLmFwaVVybCArICdtYXRlcmlhbGNhdGVnb3J5L3JlbW92ZXIvJztcclxuICAgICAgICB2YXIgQVBJX1JPVVRFX0xJU1RBUk1BVEVSSUFQUklNQSA9IHBhdGhzLmFwaVVybCArICdtYXRlcmlhbGNhdGVnb3J5L2xpc3Rhci8nO1xyXG5cclxuXHJcbiAgICAgICAgdmFyIHNlcnZpY2UgPSB7XHJcbiAgICAgICAgICAgIGNhZGFzdHJhcjogY2FkYXN0cmFyLFxyXG4gICAgICAgICAgICBleGNsdWlyOiBleGNsdWlyLFxyXG4gICAgICAgICAgICBsaXN0YXJUb2RhczogbGlzdGFyVG9kYXNcclxuXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gc2VydmljZTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gY2FkYXN0cmFyKGRhdGEpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoQVBJX1JPVVRFX0NBREFTVFJBUk1BVEVSSUFMUFJJTUEsIGRhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZXhjbHVpcihkYXRhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KEFQSV9ST1VURV9FWENMVUlSTUFURVJJQVBSSU1BLCBkYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGxpc3RhclRvZGFzKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdChBUElfUk9VVEVfTElTVEFSTUFURVJJQVBSSU1BKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgIH1cclxuXHJcblxyXG59KSgpO1xyXG5cbi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGplc3VzIG9uIDExLzA1LzIwMTYuXHJcbiAqL1xyXG5cclxuXHJcbihmdW5jdGlvbigpe1xyXG5cclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnYXBwJylcclxuICAgICAgICAuZmFjdG9yeSgnbWF0ZXJpYVByaW1hU2VydmljZScsIG1hdGVyaWFQcmltYVNlcnZpY2UpO1xyXG5cclxuICAgIG1hdGVyaWFQcmltYVNlcnZpY2UuJGluamVjdCA9IFsnJGh0dHAnLCdwYXRocycsICckbG9jYXRpb24nXTtcclxuXHJcbiAgICBmdW5jdGlvbiBtYXRlcmlhUHJpbWFTZXJ2aWNlKCRodHRwLCBwYXRocykge1xyXG5cclxuICAgICAgICB2YXIgQVBJX1JPVVRFX0NBREFTVFJBUk1BVEVSSUFMUFJJTUEgPSBwYXRocy5hcGlVcmwgKyAnbWF0ZXJpYWwvY2FkYXN0cmFyLyc7XHJcbiAgICAgICAgdmFyIEFQSV9ST1VURV9FWENMVUlSTUFURVJJQVBSSU1BID0gcGF0aHMuYXBpVXJsICsgJ21hdGVyaWFsL3JlbW92ZXIvJztcclxuICAgICAgICB2YXIgQVBJX1JPVVRFX0xJU1RBUk1BVEVSSUFQUklNQSA9IHBhdGhzLmFwaVVybCArICdtYXRlcmlhbC9saXN0YXIvJztcclxuXHJcblxyXG4gICAgICAgIHZhciBzZXJ2aWNlID0ge1xyXG4gICAgICAgICAgICBjYWRhc3RyYXI6IGNhZGFzdHJhcixcclxuICAgICAgICAgICAgZXhjbHVpcjogZXhjbHVpcixcclxuICAgICAgICAgICAgbGlzdGFyVG9kYXM6IGxpc3RhclRvZGFzXHJcblxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHNlcnZpY2U7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGNhZGFzdHJhcihkYXRhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KEFQSV9ST1VURV9DQURBU1RSQVJNQVRFUklBTFBSSU1BLCBkYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGV4Y2x1aXIoZGF0YSkge1xyXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdChBUElfUk9VVEVfRVhDTFVJUk1BVEVSSUFQUklNQSwgZGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBsaXN0YXJUb2RhcygpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoQVBJX1JPVVRFX0xJU1RBUk1BVEVSSUFQUklNQSk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICB9XHJcblxyXG5cclxufSkoKTtcclxuXG4vKipcclxuICogQ3JlYXRlZCBieSBqZXN1cyBvbiAwNi8wNS8yMDE2LlxyXG4gKi9cclxuKGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHZhciBzdGF0aWNQYXRoID0gJyc7XHJcbiAgICB2YXIgYXBpVXJsID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9jb250cm9sZS1lc3RvcXVlLXdlYi9hcGkvJztcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnYXBwJylcclxuICAgICAgICAuY29uc3RhbnQoJ3BhdGhzJywge1xyXG4gICAgICAgICAgc3RhdGljUGF0aDogc3RhdGljUGF0aCxcclxuICAgICAgICAgIGFwaVVybDogYXBpVXJsXHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY29uZmlnKGFwcENvbmZpZyk7XHJcblxyXG4gICAgYXBwQ29uZmlnLiRpbmplY3QgPSBbJyRtZFRoZW1pbmdQcm92aWRlcicsJyRsb2NhdGlvblByb3ZpZGVyJ107XHJcblxyXG4gICAgZnVuY3Rpb24gYXBwQ29uZmlnKCRtZFRoZW1pbmdQcm92aWRlcikge1xyXG4gICAgICAgICRtZFRoZW1pbmdQcm92aWRlci50aGVtZSgnZGVmYXVsdCcpXHJcbiAgICAgICAgICAgIC5wcmltYXJ5UGFsZXR0ZSgncHVycGxlJywge1xyXG4gICAgICAgICAgICAgICAgJ2RlZmF1bHQnOiAnNDAwJywgLy8gYnkgZGVmYXVsdCB1c2Ugc2hhZGUgNDAwIGZyb20gdGhlIHBpbmsgcGFsZXR0ZSBmb3IgcHJpbWFyeSBpbnRlbnRpb25zXHJcbiAgICAgICAgICAgICAgICAnaHVlLTEnOiAnMTAwJywgLy8gdXNlIHNoYWRlIDEwMCBmb3IgdGhlIDxjb2RlPm1kLWh1ZS0xPC9jb2RlPiBjbGFzc1xyXG4gICAgICAgICAgICAgICAgJ2h1ZS0yJzogJzYwMCcsIC8vIHVzZSBzaGFkZSA2MDAgZm9yIHRoZSA8Y29kZT5tZC1odWUtMjwvY29kZT4gY2xhc3NcclxuICAgICAgICAgICAgICAgICdodWUtMyc6ICdBMTAwJyAvLyB1c2Ugc2hhZGUgQTEwMCBmb3IgdGhlIDxjb2RlPm1kLWh1ZS0zPC9jb2RlPiBjbGFzc1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAvLyBJZiB5b3Ugc3BlY2lmeSBsZXNzIHRoYW4gYWxsIG9mIHRoZSBrZXlzLCBpdCB3aWxsIGluaGVyaXQgZnJvbSB0aGVcclxuICAgICAgICAgICAgLy8gZGVmYXVsdCBzaGFkZXNcclxuICAgICAgICAgICAgLmFjY2VudFBhbGV0dGUoJ3B1cnBsZScsIHtcclxuICAgICAgICAgICAgICAgICdkZWZhdWx0JzogJzIwMCcgLy8gdXNlIHNoYWRlIDIwMCBmb3IgZGVmYXVsdCwgYW5kIGtlZXAgYWxsIG90aGVyIHNoYWRlcyB0aGUgc2FtZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcblxyXG5cclxufSkoKTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgamVzdXMgb24gMTAvMDUvMjAxNi5cclxuICovXHJcblxyXG4oZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwJylcclxuICAgICAgICAgICAgLmNvbnRyb2xsZXIoJ2NhZGFzdHJvTWF0ZXJpYVByaW1hQ29udHJvbGxlcicsIGNhZGFzdHJvTWF0ZXJpYVByaW1hQ29udHJvbGxlcik7XHJcblxyXG4gICAgZnVuY3Rpb24gY2FkYXN0cm9NYXRlcmlhUHJpbWFDb250cm9sbGVyKHRvYXN0QXBwLCBtYXRlcmlhUHJpbWFTZXJ2aWNlLCAkbWREaWFsb2cpIHtcclxuXHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIHNlbGYuaW5pdGNhZGFzdHJvTWF0ZXJpYVByaW1hID0gaW5pdGNhZGFzdHJvTWF0ZXJpYVByaW1hO1xyXG4gICAgICAgIHNlbGYuY2FkYXN0cmFyTWF0ZXJpYVByaW1hID0gY2FkYXN0cmFyTWF0ZXJpYVByaW1hO1xyXG4gICAgICAgIHNlbGYuYnVzY2FVbmlkYWRlc01hdGVyaWFQcmltYSA9IGJ1c2NhVW5pZGFkZXNNYXRlcmlhUHJpbWE7XHJcbiAgICAgICAgc2VsZi5leGNsdWlyTWF0ZXJpYVByaW1hID0gZXhjbHVpck1hdGVyaWFQcmltYTtcclxuICAgICAgICBzZWxmLmxpc3RhVW5pZGFkZXM7XHJcbiAgICAgICAgc2VsZi5pc0J0blJlbW92ZU1hdGVyaWFQcmltYSA9IGZhbHNlO1xyXG4gICAgICAgIHNlbGYubWF0ZXJpYXByaW1hID0ge307XHJcbiAgICAgICAgc2VsZi5saXN0YU1hdGVyaWFQcmltYSA9IFtdO1xyXG4gICAgICAgIHNlbGYuc2VsZWNpb25hck1hdGVyaWFQcmltYSA9IHNlbGVjaW9uYXJNYXRlcmlhUHJpbWE7XHJcbiAgICAgICAgc2VsZi5jYW1wb09yZGVuY2FvID0gJ25vbWUnO1xyXG4gICAgICAgIHNlbGYucmV2ZXJzZSA9IHRydWU7XHJcbiAgICAgICAgc2VsZi5vcmRlbmFNYXRlcmlhUHJpbWEgPSBvcmRlbmFNYXRlcmlhUHJpbWE7XHJcblxyXG5cclxuXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGJ1c2NhVW5pZGFkZXNNYXRlcmlhUHJpbWEoKSB7XHJcbiAgICAgICAgICAgIHNlbGYubGlzdGFVbmlkYWRlcyA9IFsnS2cnLCAnbSddXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBzZWxlY2lvbmFyTWF0ZXJpYVByaW1hKG1hdGVyaWFQcmltYSkge1xyXG4gICAgICAgICAgICBzZWxmLm1hdGVyaWFwcmltYSA9IG1hdGVyaWFQcmltYTtcclxuICAgICAgICAgICAgc2VsZi5pc0J0blJlbW92ZU1hdGVyaWFQcmltYSA9IHRydWU7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gaW5pdGNhZGFzdHJvTWF0ZXJpYVByaW1hKCkge1xyXG4gICAgICAgICAgICBtYXRlcmlhUHJpbWFTZXJ2aWNlLmxpc3RhclRvZGFzKClcclxuICAgICAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5saXN0YU1hdGVyaWFQcmltYSA9IGRhdGE7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgICAgIC8qICB2YXIgbWF0ZXJpYXByaW1hID0ge2lkOiAxLCBub21lOiBcIlggVGVjaWRvXCIsIHNrdTogXCIwMDAwMFg5OTlcIiwgdW5pZGFkZTogXCJLR1wiLCBvYnNlcnZhY2FvOiBcIlRlc3RlIGRlIFhcIn07XHJcbiAgICAgICAgICAgICBzZWxmLmxpc3RhTWF0ZXJpYVByaW1hLnB1c2gobWF0ZXJpYXByaW1hKTtcclxuICAgICAgICAgICAgIHZhciBtYXRlcmlhcHJpbWEgPSB7aWQ6IDIsIG5vbWU6IFwiQiBUZWNpZG9cIiwgc2t1OiBcIjAwMDAwQjAwM1wiLCB1bmlkYWRlOiBcIktHXCIsIG9ic2VydmFjYW86IFwiVGVzdGUgZGUgQlwifTtcclxuICAgICAgICAgICAgIHNlbGYubGlzdGFNYXRlcmlhUHJpbWEucHVzaChtYXRlcmlhcHJpbWEpO1xyXG4gICAgICAgICAgICAgdmFyIG1hdGVyaWFwcmltYSA9IHtpZDogMywgbm9tZTogXCJBIFRlY2lkb1wiLCBza3U6IFwiMDAwMDBYOTk5XCIsIHVuaWRhZGU6IFwiS0dcIiwgb2JzZXJ2YWNhbzogXCJUZXN0ZSBkZSBBXCJ9O1xyXG4gICAgICAgICAgICAgc2VsZi5saXN0YU1hdGVyaWFQcmltYS5wdXNoKG1hdGVyaWFwcmltYSk7XHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGV4Y2x1aXJNYXRlcmlhUHJpbWEoZXYsIG1hdGVyaWFQcmltYSkge1xyXG4gICAgICAgICAgICB2YXIgY29uZmlybSA9ICRtZERpYWxvZy5jb25maXJtKClcclxuICAgICAgICAgICAgICAgICAgICAucGFyZW50KGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5ib2R5KSlcclxuICAgICAgICAgICAgICAgICAgICAudGl0bGUoJ0V4Y2x1aXIgTWF0w6lyaWEgcHJpbWEgY29tIFNrdScgKyBtYXRlcmlhUHJpbWEuc2t1Q29kZSlcclxuICAgICAgICAgICAgICAgICAgICAuY29udGVudCgnTWF0ZXJpYSBQcmltYTogJyArIG1hdGVyaWFQcmltYS5uYW1lKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hcmlhTGFiZWwoJ0V4Y2x1aXIgTWF0ZXJpYSBQcmltYScpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9rKCdTaW0nKVxyXG4gICAgICAgICAgICAgICAgICAgIC5jYW5jZWwoJ07Do28nKVxyXG4gICAgICAgICAgICAgICAgICAgIC50YXJnZXRFdmVudChldik7XHJcbiAgICAgICAgICAgICRtZERpYWxvZy5zaG93KGNvbmZpcm0pLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgbWF0ZXJpYVByaW1hU2VydmljZS5leGNsdWlyKG1hdGVyaWFQcmltYSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxmLmxpc3RhTWF0ZXJpYVByaW1hLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYubGlzdGFNYXRlcmlhUHJpbWFbaV0uaWQgPT09IG1hdGVyaWFQcmltYS5pZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5saXN0YU1hdGVyaWFQcmltYS5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0QXBwLm5ld21lc3NhZ2UoJ1JlbW92aWRvIGNvbSBzdWNlc3NvIS4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RBcHAubmV3bWVzc2FnZSgnUHJvYmxlbWEgYW8gQWNlc3NhciBvIHNlcnZpZG9yJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VsZi5saXN0YU1hdGVyaWFQcmltYS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHNlbGYubGlzdGFNYXRlcmlhUHJpbWFbaV0uaWQgKyAnID09PSAnICsgbWF0ZXJpYVByaW1hLmlkKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWxmLmxpc3RhTWF0ZXJpYVByaW1hW2ldLmlkID09PSBtYXRlcmlhUHJpbWEuaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5saXN0YU1hdGVyaWFQcmltYS5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHNlbGYuaXNCdG5SZW1vdmVNYXRlcmlhUHJpbWEgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRvYXN0QXBwLm5ld21lc3NhZ2UoJ1JlbW92aWRvIGEgTWF0ZXJpYSBQcmltYSBjb20gbyBTS1UuJyArIG1hdGVyaWFQcmltYS5za3UpO1xyXG5cclxuICAgICAgICAgICAgICAgIHNlbGYubWF0ZXJpYXByaW1hID0ge2lkOiBudWxsLCBuYW1lOiBcIlwiLCBza3VDb2RlOiBcIlwiLCBtZWFzdXJpbmdVbml0OiBcIlwiLCBkZXNjcmlwdGlvbjogXCJcIn07XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgZnVuY3Rpb24gY2FkYXN0cmFyTWF0ZXJpYVByaW1hKG1hdGVyaWFQcmltYSkge1xyXG5cclxuICAgICAgICAgICAgbWF0ZXJpYVByaW1hU2VydmljZS5jYWRhc3RyYXIobWF0ZXJpYVByaW1hKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5saXN0YU1hdGVyaWFQcmltYS5wdXNoKG1hdGVyaWFQcmltYSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2FzdEFwcC5uZXdtZXNzYWdlKCdDYWRhc3RybyByZWFsaXphZG8gY29tIHN1Y2Vzc28hJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2FzdEFwcC5uZXdtZXNzYWdlKCdQcm9ibGVtYSBhbyBBY2Vzc2FyIGEgbyBzZXJ2aWRvcicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvKiAgdmFyIG1hdGVyaWFwcmltYSA9IHtpZDogc2VsZi5saXN0YU1hdGVyaWFQcmltYS5sZW5ndGgrMSwgbm9tZTogbWF0ZXJpYVByaW1hLm5vbWUsIHNrdTogbWF0ZXJpYVByaW1hLnNrdSwgdW5pZGFkZTogbWF0ZXJpYVByaW1hLnVuaWRhZGUsIG9ic2VydmFjYW86IG1hdGVyaWFQcmltYS5vYnNlcnZhY2FvfTtcclxuICAgICAgICAgICAgIHNlbGYubGlzdGFNYXRlcmlhUHJpbWEucHVzaChtYXRlcmlhcHJpbWEpO1xyXG4gICAgICAgICAgICAgc2VsZi5tYXRlcmlhcHJpbWEgPSB7aWQ6IG51bGwsbm9tZTogXCJcIiwgc2t1OiBcIlwiLCB1bmlkYWRlOiBcIlwiLCBvYnNlcnZhY2FvOiBcIlwifTtcclxuICAgICAgICAgICAgIHRvYXN0QXBwLm5ld21lc3NhZ2UoJ0NhZGFzdHJvIHJlYWxpemFkbyBjb20gc3VjZXNzbyBwYXJhIG8gU0tVLicgKyBtYXRlcmlhUHJpbWEuc2t1KTtcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBvcmRlbmFNYXRlcmlhUHJpbWEoY2FtcG9PcmRlbmNhbykge1xyXG4gICAgICAgICAgICBzZWxmLnJldmVyc2UgPSAoc2VsZi5jYW1wb09yZGVuY2FvID09PSBjYW1wb09yZGVuY2FvKSA/ICFzZWxmLnJldmVyc2UgOiBmYWxzZTtcclxuICAgICAgICAgICAgc2VsZi5jYW1wb09yZGVuY2FvID0gY2FtcG9PcmRlbmNhbztcclxuXHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICB9XHJcblxyXG59KSgpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IGplc3VzIG9uIDExLzA1LzIwMTYuXHJcbiAqL1xyXG5cclxuXHJcbihmdW5jdGlvbigpe1xyXG5cclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnYXBwJylcclxuICAgICAgICAuZmFjdG9yeSgnbWF0ZXJpYWxDYXRlZ29yeVNlcnZpY2UnLCBtYXRlcmlhbENhdGVnb3J5U2VydmljZSk7XHJcblxyXG4gICAgbWF0ZXJpYWxDYXRlZ29yeVNlcnZpY2UuJGluamVjdCA9IFsnJGh0dHAnLCdwYXRocycsJyRsb2NhdGlvbiddO1xyXG5cclxuICAgIGZ1bmN0aW9uIG1hdGVyaWFsQ2F0ZWdvcnlTZXJ2aWNlKCRodHRwLCBwYXRocykge1xyXG5cclxuICAgICAgICB2YXIgQVBJX1JPVVRFX0NBREFTVFJBUk1BVEVSSUFMUFJJTUEgPSBwYXRocy5hcGlVcmwgKyAnbWF0ZXJpYWxjYXRlZ29yeS9jYWRhc3RyYXIvJztcclxuICAgICAgICB2YXIgQVBJX1JPVVRFX0VYQ0xVSVJNQVRFUklBUFJJTUEgPSBwYXRocy5hcGlVcmwgKyAnbWF0ZXJpYWxjYXRlZ29yeS9yZW1vdmVyLyc7XHJcbiAgICAgICAgdmFyIEFQSV9ST1VURV9MSVNUQVJNQVRFUklBUFJJTUEgPSBwYXRocy5hcGlVcmwgKyAnbWF0ZXJpYWxjYXRlZ29yeS9saXN0YXIvJztcclxuXHJcblxyXG4gICAgICAgIHZhciBzZXJ2aWNlID0ge1xyXG4gICAgICAgICAgICBjYWRhc3RyYXI6IGNhZGFzdHJhcixcclxuICAgICAgICAgICAgZXhjbHVpcjogZXhjbHVpcixcclxuICAgICAgICAgICAgbGlzdGFyVG9kYXM6IGxpc3RhclRvZGFzXHJcblxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIHNlcnZpY2U7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGNhZGFzdHJhcihkYXRhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KEFQSV9ST1VURV9DQURBU1RSQVJNQVRFUklBTFBSSU1BLCBkYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGV4Y2x1aXIoZGF0YSkge1xyXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdChBUElfUk9VVEVfRVhDTFVJUk1BVEVSSUFQUklNQSwgZGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBsaXN0YXJUb2RhcygpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoQVBJX1JPVVRFX0xJU1RBUk1BVEVSSUFQUklNQSk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICB9XHJcblxyXG5cclxufSkoKTtcclxuIiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgamVzdXMgb24gMTEvMDUvMjAxNi5cclxuICovXHJcblxyXG5cclxuKGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgICAgIC5mYWN0b3J5KCdtYXRlcmlhUHJpbWFTZXJ2aWNlJywgbWF0ZXJpYVByaW1hU2VydmljZSk7XHJcblxyXG4gICAgbWF0ZXJpYVByaW1hU2VydmljZS4kaW5qZWN0ID0gWyckaHR0cCcsJ3BhdGhzJywgJyRsb2NhdGlvbiddO1xyXG5cclxuICAgIGZ1bmN0aW9uIG1hdGVyaWFQcmltYVNlcnZpY2UoJGh0dHAsIHBhdGhzKSB7XHJcblxyXG4gICAgICAgIHZhciBBUElfUk9VVEVfQ0FEQVNUUkFSTUFURVJJQUxQUklNQSA9IHBhdGhzLmFwaVVybCArICdtYXRlcmlhbC9jYWRhc3RyYXIvJztcclxuICAgICAgICB2YXIgQVBJX1JPVVRFX0VYQ0xVSVJNQVRFUklBUFJJTUEgPSBwYXRocy5hcGlVcmwgKyAnbWF0ZXJpYWwvcmVtb3Zlci8nO1xyXG4gICAgICAgIHZhciBBUElfUk9VVEVfTElTVEFSTUFURVJJQVBSSU1BID0gcGF0aHMuYXBpVXJsICsgJ21hdGVyaWFsL2xpc3Rhci8nO1xyXG5cclxuXHJcbiAgICAgICAgdmFyIHNlcnZpY2UgPSB7XHJcbiAgICAgICAgICAgIGNhZGFzdHJhcjogY2FkYXN0cmFyLFxyXG4gICAgICAgICAgICBleGNsdWlyOiBleGNsdWlyLFxyXG4gICAgICAgICAgICBsaXN0YXJUb2RhczogbGlzdGFyVG9kYXNcclxuXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gc2VydmljZTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gY2FkYXN0cmFyKGRhdGEpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoQVBJX1JPVVRFX0NBREFTVFJBUk1BVEVSSUFMUFJJTUEsIGRhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZXhjbHVpcihkYXRhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KEFQSV9ST1VURV9FWENMVUlSTUFURVJJQVBSSU1BLCBkYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGxpc3RhclRvZGFzKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdChBUElfUk9VVEVfTElTVEFSTUFURVJJQVBSSU1BKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgIH1cclxuXHJcblxyXG59KSgpO1xyXG4iLCIvKipcclxuICogQ3JlYXRlZCBieSBqZXN1cyBvbiAwNi8wNS8yMDE2LlxyXG4gKi9cclxuKGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHZhciBzdGF0aWNQYXRoID0gJyc7XHJcbiAgICB2YXIgYXBpVXJsID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9jb250cm9sZS1lc3RvcXVlLXdlYi9hcGkvJztcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnYXBwJylcclxuICAgICAgICAuY29uc3RhbnQoJ3BhdGhzJywge1xyXG4gICAgICAgICAgc3RhdGljUGF0aDogc3RhdGljUGF0aCxcclxuICAgICAgICAgIGFwaVVybDogYXBpVXJsXHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY29uZmlnKGFwcENvbmZpZyk7XHJcblxyXG4gICAgYXBwQ29uZmlnLiRpbmplY3QgPSBbJyRtZFRoZW1pbmdQcm92aWRlcicsJyRsb2NhdGlvblByb3ZpZGVyJ107XHJcblxyXG4gICAgZnVuY3Rpb24gYXBwQ29uZmlnKCRtZFRoZW1pbmdQcm92aWRlcikge1xyXG4gICAgICAgICRtZFRoZW1pbmdQcm92aWRlci50aGVtZSgnZGVmYXVsdCcpXHJcbiAgICAgICAgICAgIC5wcmltYXJ5UGFsZXR0ZSgncHVycGxlJywge1xyXG4gICAgICAgICAgICAgICAgJ2RlZmF1bHQnOiAnNDAwJywgLy8gYnkgZGVmYXVsdCB1c2Ugc2hhZGUgNDAwIGZyb20gdGhlIHBpbmsgcGFsZXR0ZSBmb3IgcHJpbWFyeSBpbnRlbnRpb25zXHJcbiAgICAgICAgICAgICAgICAnaHVlLTEnOiAnMTAwJywgLy8gdXNlIHNoYWRlIDEwMCBmb3IgdGhlIDxjb2RlPm1kLWh1ZS0xPC9jb2RlPiBjbGFzc1xyXG4gICAgICAgICAgICAgICAgJ2h1ZS0yJzogJzYwMCcsIC8vIHVzZSBzaGFkZSA2MDAgZm9yIHRoZSA8Y29kZT5tZC1odWUtMjwvY29kZT4gY2xhc3NcclxuICAgICAgICAgICAgICAgICdodWUtMyc6ICdBMTAwJyAvLyB1c2Ugc2hhZGUgQTEwMCBmb3IgdGhlIDxjb2RlPm1kLWh1ZS0zPC9jb2RlPiBjbGFzc1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAvLyBJZiB5b3Ugc3BlY2lmeSBsZXNzIHRoYW4gYWxsIG9mIHRoZSBrZXlzLCBpdCB3aWxsIGluaGVyaXQgZnJvbSB0aGVcclxuICAgICAgICAgICAgLy8gZGVmYXVsdCBzaGFkZXNcclxuICAgICAgICAgICAgLmFjY2VudFBhbGV0dGUoJ3B1cnBsZScsIHtcclxuICAgICAgICAgICAgICAgICdkZWZhdWx0JzogJzIwMCcgLy8gdXNlIHNoYWRlIDIwMCBmb3IgZGVmYXVsdCwgYW5kIGtlZXAgYWxsIG90aGVyIHNoYWRlcyB0aGUgc2FtZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcblxyXG5cclxufSkoKTtcclxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
